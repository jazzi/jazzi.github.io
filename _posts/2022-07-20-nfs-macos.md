
On MacOS client, if show out errors as below:

```
% sudo mount -t nfs -o rw,async,resvport servername:/export/our /System/Volumes/Data/mnt   
mount_nfs: can't mount with remote locks when server (servername) is not running rpc.statd: RPC prog. not avail
mount: /System/Volumes/Data/mnt failed with 74
```

Then it might be the problem of NFS version which you should specify it clearly as below on MacOS:

```text
sudo nano /etc/nfs.conf
#
# nfs.conf: the NFS configuration file
nfs.client.mount.options = vers=4
```

And then check the NFS version being using on Server

`sudo nfsstat -s` 

Or on NFS client

`sudo nfsstat -c`

## How to auto mount NFS on MacOS

```text
/System/Volumes/Data/mnt/     auto_nfs
```

Then create file /etc/auto_nfs which contains:

```text
Music  -rw,async,resvport,nfc,vers=4  servername:/export/music
```

## NFS performance is very slow

Normally on Mac the speed should be over 4M/s, if it's lower than that, there are two ways to do on the Mac client.

### 1. Add mount options of nolocks and localocks

Edit /etc/auto_master to add options **nolocks, locallocks** to the */net* entry and remove option *hidefromfinder*.

If you want to fix every automount, edit */etc/autofs.conf* and add these two options to **AUTOMOUNTD_MNTOPTS=** so these options will get applied on every mount.

Then reboot and see how is your world.

This solution comes from [Browing NFS shares extremely slow and hang Finder](https://forums.macrumors.com/threads/browsing-nfs-shares-extremely-slow-and-hang-finder.1518545/) which works for me.

### 2. Specify wsize and rsize on mount

```text
sudo mount server:share /mnt nfs -U,w=8388608,-P,-r=8388608
```

```text
when you mount with 
-w=65536 // writebufsize
,-4 // NFS V4
,-U // UDP 
,-P // Priv Ports 
,-r=65536 // readbufsize 

you will get about 4MB/sec.
```
Regarding the *wsize* and *rsize* you could try 8192(8K) or 32768(32K) too.

Above solution comes from [morm on macosx](https://macosx.com/threads/nfs-with-finder-very-slow.44178/page-2).
